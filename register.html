<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Đăng ký</title>
<style>
    body{
        display: flex;
        justify-content: center;
        align-items: center;
        height: 90vh;
        margin: 0 auto;
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #f7f9fb;
    }
    .login{
        background: #004aad;
        padding: 25px;
        border-radius: 10px;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    .logo{
        width: 80px;
        height: 80px;
        margin: 0 auto;
    }
    form h2{
        text-align: center;
        color: #ccae6e;
        font-size: 24px;
    }
    .input-form{
        margin: 10px 0;
    }
    .input-form input{
        padding:10px;
        width: 300px;
        border-radius: 5px;
        border: none;
        background: #ccae6e;
        color: #fff;
    }
    .input-form input::placeholder{
        color: #fff;
    }
    .btn-auth{
        width: 100%;
        padding: 10px;
        border: none;
        border-radius: 5px;
        font-weight: 700;
        font-size: 16px;
        transition: 0.2s;
        cursor: pointer;
    }
    .login p{
       text-align: right;
       color: #fff;
       font-size: 14px;
    }
    .login p span{
        text-decoration: underline;
        font-weight: 700;
        cursor: pointer;
    }
</style>
</head>
<body>
<div id="header"></div>
<div class="login">
    <img src="./img/logo.png" alt="" class="logo">
    <form id="registerForm">
        <h2>Đăng ký</h2>
        <div class="input-form">
            <input type="text" placeholder="Tài khoản" id="username" required>
        </div>
        <div class="input-form">
            <input type="password" placeholder="Mật khẩu" id="password" required>
        </div>
        <div class="input-form">
            <input type="password" placeholder="Nhập lại mật khẩu" id="password2" required>
        </div>
        <button type="submit" class="btn-auth">Đăng ký</button>
    </form>
    <p>Bạn có tài khoản?<a href="login.html"><span>Đăng nhập</span></a></p>
</div>
<div id="footer"></div>

<script>
const webAppUrl = "https://script.google.com/macros/s/AKfycbxKTod51r5pLNJDJyC1K03ZS6djOUsaHJXKYC_wRsGEtu7YufcjgRleomrmBvcXvi5Q/exec";

document.getElementById("registerForm").addEventListener("submit", async function(e){
    e.preventDefault();

    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();
    const password2 = document.getElementById("password2").value.trim();

    if(password !== password2){
        alert("Mật khẩu không trùng khớp!");
        return;
    }

    try {
        const res = await fetch(webAppUrl, {
            method: "POST",
            body: JSON.stringify({username, password}),
            headers: {"Content-Type": "application/json"}
        });
        const data = await res.json();

        if(data.status === "success"){
            alert(data.message);
            window.location.href = "login.html"; // chuyển sang login
        } else {
            alert(data.message);
        }

    } catch(err){
        console.error(err);
        alert("Lỗi kết nối server");
    }
});
</script>
</body>
</html>
